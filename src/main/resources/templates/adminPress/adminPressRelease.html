<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>λ³΄λ„μλ£</title>
    <!-- ν—¤λ” css -->
    <link rel="stylesheet" href="/admincss/adminHeader.css">
    <!-- ν‘Έν„° css -->
    <link rel="stylesheet" href="/admincss/adminFooter.css">
    <!-- μ‚¬μ΄λ“λ°” css -->
    <link rel="stylesheet" href="/admincss/adminSidebar.css">
    <!-- κ³µν†µ css -->
    <link rel="stylesheet" href="/admincss/adminCommon.css">
    <!-- λ³΄λ„μλ£ λ©λ΅ μ „μ© -->
    <link rel="stylesheet" href="/admincss/adminPressRelease.css">
</head>

<body>
<!-- ν—¤λ”(ν—¤λ” css) -->
<div th:replace="~{adminHeader :: header}"></div>
<!-- μ‚¬μ΄λ“λ°”(μ‚¬μ΄λ“λ°” css, κ³µν†µ js) -->
<div th:replace="~{adminSidebar :: sidebar}"></div>

<main id="container">
    <!-- λ§¨ μ„ νƒ€μ΄ν‹€(κ³µν†µ css) -->
    <h3 class="main_title">λ³΄λ„μλ£</h3>

    <!-- π”Ή κ²€μƒ‰ + νμ΄μ§€ μ‚¬μ΄μ¦ μ„ νƒ μμ—­μ„ form μΌλ΅ λ³€κ²½ -->
    <form class="admin_tot_srch_box"
          th:action="@{/adminPress}"
          method="get">

        <div class="admin_totCnt_box">
            <p>
                Total :
                <!-- DBμ—μ„ λ„μ–΄μ¨ totalCount μ‚¬μ© -->
                <span id="admin_tot_cnt" th:text="${totalCount}">0</span>
                κ±΄
            </p>
            <!-- size νλΌλ―Έν„° μ¶”κ°€ -->
            <select id="admin_row_select"
                    name="size"
                    onchange="this.form.submit()">
                <option value="10" th:selected="${size == 10}">10</option>
                <option value="20" th:selected="${size == 20}">20</option>
                <option value="30" th:selected="${size == 30}">30</option>
            </select>
            <span>κ±΄μ”© λ³΄κΈ°</span>
        </div>

        <!-- λ³΄λ„μλ£ κ²€μƒ‰ -->
        <div class="admin_srch_field">
            <input type="text"
                   name="press_keyword"
                   class="admin_srch_input"
                   placeholder="λ³΄λ„μλ£ μ λ©μ„ μ…λ ¥ν•΄ μ£Όμ„Έμ”."
                   th:value="${keyword}">
            <button type="submit" class="admin_srch_icon">
                <img src="/images/srchImg.png" alt="κ²€μƒ‰">
            </button>
        </div>
    </form>

    <!-- λ³΄λ„μλ£ λ©λ΅ ν…μ΄λΈ” (κ³µν†µ css) -->
    <div id="admin_press_box" class="admin_table_box">
        <table id="admin_press_table" class="admin_table_cont">
            <thead>
            <tr>
                <th style="width: 60px;">No.</th>
                <th style="width: 200px;">μ λ©</th>
                <th style="width: 200px;">λ‚΄μ©</th>
                <th style="width: 120px;">URL</th>
                <th style="width: 100px;">λ“±λ΅μ</th>
                <th style="width: 100px;">λ“±λ΅μΌ</th>
                <th style="width: 80px;">κ΄€λ¦¬</th>
            </tr>
            </thead>
            <tbody>
            <!-- DBμ—μ„ λ„μ–΄μ¨ pressListκ°€ λΉ„μ—μ„ λ• -->
            <tr th:if="${#lists.isEmpty(pressList)}">
                <td colspan="7" style="text-align: center;">λ“±λ΅λ λ³΄λ„μλ£κ°€ μ—†μµλ‹λ‹¤.</td>
            </tr>

            <!-- DBμ—μ„ λ„μ–΄μ¨ pressList μ¶λ ¥ -->
            <tr th:each="press, stat : ${pressList}">
                <!-- No. : μ „μ²΄ κ±΄μ κΈ°μ¤€ μµμ‹ μ λ²νΈ -->
                <td th:text="${totalCount - ((page - 1) * size) - stat.index}">1</td>

                <!-- μ λ© -->
                <td>
                    <a th:href="@{|/adminPress/${press.pressReleaseId}/edit|}"
                       th:text="${press.title}">
                        λ³΄λ„μλ£ μ λ©
                    </a>
                </td>

                <!-- λ‚΄μ©(μ”μ•½) -->
                <td th:text="${#strings.abbreviate(press.contentHtml, 40)}">
                    λ‚΄μ© μ”μ•½
                </td>

                <!-- μ²¨λ¶€νμΌ(λ§ν¬ URL) -->
                <td>
                    <a th:if="${press.linkUrl != null and !#strings.isEmpty(press.linkUrl)}"
                       th:href="${press.linkUrl}"
                       target="_blank"
                       rel="noopener noreferrer">
                        λ°”λ΅κ°€κΈ°
                    </a>
                    <span th:if="${press.linkUrl == null or #strings.isEmpty(press.linkUrl)}">-</span>
                </td>

                <!-- λ“±λ΅μ -->
                <td th:text="${press.writerName}">
                    κ΄€λ¦¬μ
                </td>

                <!-- λ“±λ΅μΌ -->
                <td th:text="${#temporals.format(press.createdAt, 'yyyy-MM-dd')}">
                    2025-11-19
                </td>

                <!-- κ΄€λ¦¬(μ‚­μ ) -->
                <td>
                    <form th:action="@{|/adminPress/${press.pressReleaseId}/delete|}"
                          method="post"
                          style="display:inline-block;"
                          onsubmit="return confirm('μ •λ§ μ‚­μ ν•μ‹κ² μµλ‹κΉ?');">
                        <button type="submit" class="admin_delete_btn">μ‚­μ </button>
                    </form>
                </td>
            </tr>
            </tbody>
        </table>
    </div>

    <!-- νμ΄μ§• -->
    <div id="pagination" class="paging_btn paging_simple" th:if="${totalPages > 1}">

        <!-- μ΄μ „ -->
        <span th:if="${page <= 1}" class="page_arrow prev disabled">&lsaquo;</span>
        <a th:if="${page > 1}"
           th:href="@{/adminPress(page=${page - 1}, size=${size}, press_keyword=${keyword})}"
           class="page_arrow prev">
            &lsaquo;
        </a>

        <!-- ν„μ¬ / μ „μ²΄ -->
        <span class="page_status">
            <span th:text="${page}">1</span>
            <span>/</span>
            <span th:text="${totalPages}">1</span>
        </span>

        <!-- λ‹¤μ -->
        <span th:if="${page >= totalPages}" class="page_arrow next disabled">&rsaquo;</span>
        <a th:if="${page < totalPages}"
           th:href="@{/adminPress(page=${page + 1}, size=${size}, press_keyword=${keyword})}"
           class="page_arrow next">
            &rsaquo;
        </a>

    </div>
</main>

<!-- ν‘Έν„°(ν‘Έν„° css) -->
<div th:replace="~{adminFooter :: footer}"></div>
</body>

<!-- κ³µν†µ js -->
<script src="/adminjs/adminHtml.js"></script>
<script src="/adminjs/adminCommon.js"></script>
<!-- λ³΄λ„μλ£ λ©λ΅ μ „μ© js -->
<!--<script src="/adminjs/adminPressRelease.js"></script>-->

</html>
