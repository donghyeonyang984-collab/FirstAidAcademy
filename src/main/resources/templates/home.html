<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<body>
<th:block th:fragment="content">

    <!-- 배너(슬라이더) -->
    <section class="banner-container">
        <div class="banner-texts" id="bannerTexts" aria-live="polite">
            <!-- 슬라이드 1 -->
            <div class="fixed-text active" data-index="0">
                <span class="eyebrow">응급처치 온라인</span>
                <h1>언제 어디서나 배우는 응급처치</h1>
                <p>스마트 학습으로 생명을 지키는 힘을 기릅니다.</p>
                <div class="cta">
                    <a class="btn btn-primary" href="#"><i class="fa-solid fa-play"></i> 시작하기</a>
                    <a class="btn btn-outline" href="#"><i class="fa-solid fa-book-open"></i> 과정 보기</a>
                </div>
            </div>

            <!-- 슬라이드 2 -->
            <div class="fixed-text" data-index="1">
                <span class="eyebrow">응급처치 온라인</span>
                <h1>실시간 동영상 강의</h1>
                <p>전문가의 지도로 단계별로 쉽게 배워보세요.</p>
                <div class="cta">
                    <a class="btn btn-primary" href="#"><i class="fa-solid fa-play"></i> 시작하기</a>
                    <a class="btn btn-outline" href="#"><i class="fa-solid fa-book-open"></i> 과정 보기</a>
                </div>
            </div>

            <!-- 슬라이드 3 -->
            <div class="fixed-text" data-index="2">
                <span class="eyebrow">응급처치 온라인</span>
                <h1>이수증 발급까지 한 번에</h1>
                <p>학습 완료 후 즉시 발급되는 수료증</p>
                <div class="cta">
                    <a class="btn btn-primary" href="/courses/about.html"><i class="fa-solid fa-play"></i> 시작하기</a>
                    <a class="btn btn-outline" href="courses/courses.html"><i class="fa-solid fa-book-open"></i> 과정 보기</a>
                </div>
            </div>
        </div>

        <!-- 아래 부분(슬라이드/도트) -->
        <div class="banner-slide" id="bannerSlide">
            <div class="banner active"
                 style="background-image: url('/images/back1.jpg');"
                 role="img" aria-label="학습 장면 이미지 1"></div>
            <div class="banner"
                 style="background-image: url('/images/back2.jpg');"
                 role="img" aria-label="학습 장면 이미지 2"></div>
            <div class="banner"
                 style="background-image: url('/images/back3.jpg');"
                 role="img" aria-label="학습 장면 이미지 3"></div>
        </div>

        <div class="dots" id="dots" role="tablist" aria-label="배너 이동">
            <span class="dot active" role="tab"
                  aria-selected="true" aria-controls="bannerSlide" tabindex="0"></span>
            <span class="dot" role="tab"
                  aria-selected="false" aria-controls="bannerSlide" tabindex="0"></span>
            <span class="dot" role="tab"
                  aria-selected="false" aria-controls="bannerSlide" tabindex="0"></span>
        </div>
    </section>

    <!-- ===== 카테고리 ===== -->
    <section class="section scroll-animate">
        <h2>주요 응급처치 교육</h2>
        <p class="sub">핵심 주제를 한눈에 시작하세요.</p>
        <div class="cat-grid">
            <a class="card scroll-animate" href="#">
                <div class="icon"><i class="fa-solid fa-droplet"></i></div><p>출혈</p>
            </a>
            <a class="card scroll-animate" href="#">
                <div class="icon"><i class="fa-solid fa-lungs"></i></div><p>기도막힘</p>
            </a>
            <a class="card scroll-animate" href="#">
                <div class="icon"><i class="fa-solid fa-heart-pulse"></i></div><p>심정지</p>
            </a>
            <a class="card scroll-animate" href="#">
                <div class="icon"><i class="fa-solid fa-fire"></i></div><p>화상</p>
            </a>
        </div>
    </section>

    <!-- ====== 메인 정보 영역 전체 ====== -->
    <div class="info-wrapper">
        <!-- 왼쪽: 보도자료 + 공지사항 -->
        <div class="info-left">
            <!-- 보도자료 -->
            <h3 class="info-title">
                <span>보도자료</span>
                <a th:href="@{/news}" href="http://localhost:8080/pages/news.html">
                    더보기<i class="fa-solid fa-plus"></i>
                </a>
            </h3>
            <div class="info-box press scroll-animate">
                <ul class="info-list">
                    <!-- 데이터 없을 때 -->
                    <li th:if="${#lists.isEmpty(latestPress)}">
                        <span>등록된 보도자료가 없습니다.</span>
                    </li>

                    <!-- 최신 보도자료 5개 -->
                    <li th:each="press : ${latestPress}">
                        <a th:href="@{/news/{id}(id=${press.id})}"
                           th:text="${press.title}">
                            보도자료 제목
                        </a>
                        <span class="date"
                              th:text="${press.createdDate}">
                        2025-11-10
                    </span>
                    </li>
                </ul>
            </div>

            <!-- 공지사항 -->
            <h3 class="info-title">
                <span>공지사항</span>
                <a th:href="@{/notice}" href="http://localhost:8080/pages/notice.html">
                    더보기<i class="fa-solid fa-plus"></i>
                </a>
            </h3>
            <div class="info-box notice">
                <ul class="info-list">
                    <!-- 데이터 없을 때 -->
                    <li th:if="${#lists.isEmpty(latestNotices)}">
                        <span>등록된 공지사항이 없습니다.</span>
                    </li>

                    <!-- 최신 공지 5개 -->
                    <li th:each="notice : ${latestNotices}">
                        <a th:href="@{/notice/{id}(id=${notice.id})}"
                           th:text="${notice.title}">
                            공지사항 제목
                        </a>
                        <span class="date"
                              th:text="${notice.createdDate}">
                        2025-11-15
                    </span>
                    </li>
                </ul>
            </div>
        </div>

        <!-- 오른쪽: 자주 찾는 항목 -->
        <div class="info-right-group">
            <h3 class="right-title">자주 찾는 항목</h3>
            <div class="info-right-container">
                <div class="info-right">
                    <div class="info-grid scroll-animate">

                        <!-- 수료증 발급: 나의 수료증 / 발급 페이지 -->
                        <a class="info-small"
                           href="/myPage/completion.html"
                           th:href="@{/myPage/completion.html}">
                            <i class="fa fa-graduation-cap"></i>
                            <h3>수료증 발급</h3>
                        </a>

                        <!-- 수강신청목록: 교육과정 > 강의 목록 -->
                        <a class="info-small"
                           href="/myPage/courseList.html"
                           th:href="@{/myPage/courseList.html}">
                            <i class="fa fa-clipboard-list"></i>
                            <h3>수강신청목록</h3>
                        </a>

                        <!-- 문의사항: 마이페이지 > 문의 사항 -->
                        <a class="info-small"
                           href="/myPage/question.html"
                           th:href="@{/myPage/question.html}">
                            <i class="fa fa-comments"></i>
                            <h3>문의사항</h3>
                        </a>

                        <!-- FAQ: 소식센터 > FAQ -->
                        <a class="info-small"
                           href="/pages/faq.html"
                           th:href="@{/pages/faq.html}">
                            <i class="fa fa-question-circle"></i>
                            <h3>FAQ</h3>
                        </a>

                        <!-- 게임콘텐츠(게임 · 훈련 메인) -->
                        <a class="info-small"
                           href="/game/aboutGame.html"
                           th:href="@{/game/aboutGame.html}">
                            <i class="fa fa-gamepad"></i>
                            <h3>게임소개</h3>
                        </a>

                        <!-- 나의 강의실 메인 -->
                        <a class="info-small"
                           href="/myPage/myStudy.html"
                           th:href="@{/myPage/myStudy.html}">
                            <i class="fa fa-chalkboard-teacher"></i>
                            <h3>나의 강의실</h3>
                        </a>

                    </div>
                </div>
            </div>
        </div>


        <!-- 배너 & 스크롤 스크립트 -->
    <script>
        // 배너 슬라이드 상태
        const slides = document.getElementById("bannerSlide");
        const dots = document.querySelectorAll(".dot");
        const banners = document.querySelectorAll(".banner");
        const fixedTexts = document.querySelectorAll(".fixed-text");

        const totalSlides = banners.length;
        let currentIndex = 0;
        let autoplayTimer = null;

        function showSlide(index) {
            slides.style.transform = `translateX(-${index * 100}%)`;
            dots.forEach(dot => dot.classList.remove("active"));
            banners.forEach(b => b.classList.remove("active"));
            fixedTexts.forEach(text => text.classList.remove("active"));

            dots[index].classList.add("active");
            banners[index].classList.add("active");
            fixedTexts[index].classList.add("active");
            currentIndex = index;
        }

        // 도트 클릭 이동
        dots.forEach((dot, index) => {
            dot.addEventListener("click", () => {
                showSlide(index);
                restartAutoplay();
            });
            // 접근성: 키보드 탭으로 포커스 시 엔터/스페이스로 이동
            dot.addEventListener("keydown", (e) => {
                if (e.key === "Enter" || e.key === " ") {
                    e.preventDefault();
                    showSlide(index);
                    restartAutoplay();
                }
            });
        });

        // 자동재생(5초 간격)
        function startAutoplay() {
            stopAutoplay();
            autoplayTimer = setInterval(() => {
                currentIndex = (currentIndex + 1) % totalSlides;
                showSlide(currentIndex);
            }, 5000);
        }
        function stopAutoplay() {
            if (autoplayTimer) clearInterval(autoplayTimer);
            autoplayTimer = null;
        }
        function restartAutoplay() { startAutoplay(); }

        // 초기화
        showSlide(0);
        startAutoplay();

        // 스크롤 애니메이션 처리
        const observer = new IntersectionObserver(
            (entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('show');
                    }
                });
            },
            { threshold: 0.15 } // 15% 보이면 실행
        );

        // 적용할 요소들 선택
        document.querySelectorAll('.scroll-animate')
            .forEach(el => observer.observe(el));
    </script>

</th:block>
</body>
</html>
