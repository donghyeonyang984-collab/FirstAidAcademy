<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<body>

<th:block th:fragment="content">

    <h2>공지사항</h2>

    <!-- 검색 폼 -->
    <form class="search-box" th:action="@{/notice}" method="get">
        <input type="text"
               name="q"
               placeholder="제목 검색"
               th:value="${keyword}">
        <i class="fa-solid fa-magnifying-glass"></i>
    </form>


    <table class="table">
        <thead>
        <tr>
            <th>번호</th>
            <th>제목</th>
            <th>작성자</th>
            <th>등록일</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="item, stat : ${notices}">
            <!-- 전체 개수 기준으로 역순 번호 -->
            <td th:text="${totalCount - ((page - 1) * size) - stat.index}">1</td>

            <td>
                <a th:href="@{/notice/{id}(id=${item.noticeId}, page=${page}, q=${q})}"
                   th:text="${item.title}">
                    공지사항 제목
                </a>
            </td>

            <!-- Notice.writerName 사용 -->
            <td th:text="${item.writerName}">관리자</td>

            <!-- Notice.createdAt 사용 -->
            <td th:text="${#temporals.format(item.createdAt, 'yyyy.MM.dd')}">2025.11.03</td>
        </tr>

        <tr th:if="${#lists.isEmpty(notices)}">
            <td colspan="4">등록된 공지사항이 없습니다.</td>
        </tr>
        </tbody>
    </table>

    <!-- 〈 1 / 3 〉 형식 페이징 -->
    <div class="pagination" th:if="${totalPages > 0}">
        <!-- 이전 -->
        <a class="page-btn prev"
           th:if="${page > 1}"
           th:href="@{/notice(page=${page - 1}, size=${size}, q=${q})}">
            &lt;
        </a>
        <span class="page-btn prev disabled"
              th:unless="${page > 1}">&lt;</span>

        <!-- 현재 / 전체 -->
        <span class="page-info"
              th:text="${page} + ' / ' + ${totalPages}">
    1 / 1
</span>


        <!-- 다음 -->
        <a class="page-btn next"
           th:if="${page < totalPages}"
           th:href="@{/notice(page=${page + 1}, size=${size}, q=${q})}">
            &gt;
        </a>
        <span class="page-btn next disabled"
              th:unless="${page < totalPages}">&gt;</span>
    </div>

</th:block>

</body>
</html>
